{% extends "base.html" %}
{% set active_page = "project" %}

{% block containerclass %}container-fluid{% endblock %}

{% block contents %}
<div class="row">
  <!-- Left panel -->
  <div class="col-md-3">
    <!-- Tab selector -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="project-tab" data-toggle="tab" href="#project" role="tab" aria-controls="project" aria-selected="true">Project info</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="documents-tab" data-toggle="tab" href="#documents" role="tab" aria-controls="documents" aria-selected="false">Documents</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="tags-tab" data-toggle="tab" href="#tags" role="tab" aria-controls="tags" aria-selected="false">Tags</a>
      </li>
    </ul>

    <div class="tab-content" id="myTabContent">

      <!-- Project info and metadata -->
      <div class="tab-pane fade show active" id="project" role="tabpanel" aria-labelledby="project-tab">
        <form id="project-metadata-form">
          <div class="form-group">
            <label for="project-name" class="col-sm-2 col-form-label">Name</label>
            <input type="text" class="form-control" id="project-name" name="project-name" value="{{ project.name }}" />
          </div>
          <div class="form-group">
            <label for="project-description" class="col-sm-2 col-form-label">Description</label>
            <textarea class="form-control" id="project-description" name="project-description">{{ project.description }}</textarea>
          </div>
        </form>
      </div>

      <!-- List of documents -->
      <div class="tab-pane fade" id="documents" role="tabpanel" aria-labelledby="documents-tab">
        <div class="list-group list-group-flush" id="documents-list">
          <div class="list-group-item disabled">Loading...</div>
          <a class="list-group-item list-group-item-primary" href="javascript:addDocument()">Add a document</a>
        </div>
      </div>

      <!-- List of tags -->
      <div class="tab-pane fade" id="tags" role="tabpanel" aria-labelledby="tags-tab">
        <ul class="list-group list-group-flush" id="tags-list">
          <li class="list-group-item">
            <div class="d-flex justify-content-between align-items-center">
              <div><span class="expand-marker">-</span> family</div>
              <a href="#" class="badge badge-primary badge-pill">15</a>
            </div>
            <ul class="sublist">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div><span class="expand-marker">+</span> father</div>
                <a href="#" class="badge badge-primary badge-pill">5</a>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div><span class="expand-marker">&nbsp;</span> mother</div>
                <a href="#" class="badge badge-primary badge-pill">2</a>
              </li>
              <li class="list-group-item">
                <div class="d-flex justify-content-between align-items-center">
                  <div><span class="expand-marker">-</span> brother</div>
                  <a href="#" class="badge badge-primary badge-pill">3</a>
                </div>
                <ul class="sublist">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div><span class="expand-marker">&nbsp;</span> bro</div>
                    <a href="#" class="badge badge-primary badge-pill">2</a>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            + interviewees
            <a href="#" class="badge badge-primary badge-pill">6</a>
          </li>
        </ul>
      </div>

    </div>
  </div>

  <!-- Right panel -->
  <div class="col-md-9">

    <div class="document-view">
      <a href="#" class="document-link badge badge-primary">main doc</a>

      <div id="document-contents">
        <p style="font-style: oblique; text-align: center;">Load a document on the left</p>
      </div>
    </div>

  </div>
</div>

<div class="modal" id="document-add-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <form id="document-add-form" class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add a document</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          {{ xsrf_form_html() }}
          <div class="row">
            <div class="col-md-6">
              <input type="text" class="form-control" id="document-add-name" name="document-add-name" placeholder="Name" />
            </div>
            <div class="col-md-6">
              <input type="file" class="form-control" id="document-add-file" name="document-add-name" placeholder="Name" />
            </div>
          </div>
          <textarea class="form-control" id="document-add-description" name="document-add-description" placeholder="Description"></textarea>
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" id="document-add-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">Import</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  var project_id = {{ project.id }};
  var last_event = {{ last_event }};
  var documents = {{ documents }};
</script>

<script type="text/javascript" src="{{ static_url('js/tagger.js') }}"></script>

<div id="hlinfo"><a href="javascript:highlightSelection(current_selection);">[tag]</a></div>

{% endblock %}
